{% extends "base.html" %}
{% block title %}–î–∞—à–±–æ—Ä–¥ - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ü–∏—Ç–∞—Ç{% endblock %}
{% block content %}
<h1>üìä –î–∞—à–±–æ—Ä–¥</h1>

<!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
<h2>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
<ul>
    <li><strong>–í—Å–µ–≥–æ —Ü–∏—Ç–∞—Ç:</strong> {{ stats.total_quotes }}</li>
    <li><strong>–í—Å–µ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤:</strong> {{ stats.total_views }}</li>
    <li><strong>–í—Å–µ–≥–æ –ª–∞–π–∫–æ–≤:</strong> {{ stats.total_likes }}</li>
    <li><strong>–í—Å–µ–≥–æ –¥–∏–∑–ª–∞–π–∫–æ–≤:</strong> {{ stats.total_dislikes }}</li>
    <li><strong>–°—Ä–µ–¥–Ω–∏–π –≤–µ—Å:</strong> {{ stats.avg_weight|floatformat:1 }}</li>
</ul>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ -->
<h2>üìñ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤</h2>
{% if source_stats %}
<table border="1" style="border-collapse: collapse; width: 100%; margin-bottom: 20px">
    <thead>
        <tr>
            <th style="padding: 8px">–¢–∏–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∞</th>
            <th style="padding: 8px">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–∏—Ç–∞—Ç</th>
            <th style="padding: 8px">–õ–∞–π–∫–∏</th>
            <th style="padding: 8px">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã</th>
        </tr>
    </thead>
    <tbody>
        {% for stat in source_stats %}
        <tr>
            <td style="padding: 8px; text-align: center">{{ stat.source_type }}</td>
            <td style="padding: 8px; text-align: center">{{ stat.count }}</td>
            <td style="padding: 8px; text-align: center">{{ stat.total_likes }}</td>
            <td style="padding: 8px; text-align: center">{{ stat.total_views }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
{% endif %}

<!-- –¢–æ–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∏ -->
<h2>üèÜ –¢–æ–ø-5 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø–æ –ª–∞–π–∫–∞–º</h2>
{% if top_sources %}
<ol>
    {% for source in top_sources %}
    <li><strong>{{ source.source }}</strong> - {{ source.total_likes }} –ª–∞–π–∫–æ–≤, {{ source.count }} —Ü–∏—Ç–∞—Ç</li>
    {% endfor %}
</ol>
{% else %}
<p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
{% endif %}

<!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ü–∏—Ç–∞—Ç—ã -->
<h2>üïí –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã</h2>
{% if recent_quotes %} {% for quote in recent_quotes %}
<div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; border-radius: 5px">
    <p><em>"{{ quote.get_short_text }}"</em></p>
    <p><strong>–ò—Å—Ç–æ—á–Ω–∏–∫:</strong> {{ quote.source }}</p>
    <p>
        üëç {{ quote.likes }} | üëé {{ quote.dislikes }} | üëÅÔ∏è {{ quote.watches }} {% if quote.created_at %} | –î–æ–±–∞–≤–ª–µ–Ω–æ:
        {{ quote.created_at|date:"d.m.Y H:i" }} {% endif %}
    </p>
</div>
{% endfor %} {% else %}
<p>–ù–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ü–∏—Ç–∞—Ç</p>
{% endif %}

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<hr />
<p>
    <a href="{% url 'random_quote' %}">üé≤ –ö —Ü–∏—Ç–∞—Ç–∞–º</a> | <a href="{% url 'quote_add' %}">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ü–∏—Ç–∞—Ç—É</a> |
    <a href="{% url 'quotes_top' %}">üèÜ –¢–æ–ø-10</a>
</p>
{% endblock %}